webpackJsonp([5],{HIX4:function(t,e,r){t.exports=r("N0pe")},N0pe:function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("section",[r("h2",{attrs:{id:"axios"}},[t._v("Axios")]),t._v(" "),r("h3",{attrs:{id:"an-zhuang"}},[t._v("安装")]),t._v(" "),r("pre",{pre:!0},[r("code",{attrs:{"v-pre":""}},[t._v("cnpm i axios -S\n")])]),t._v(" "),r("hr"),t._v(" "),r("h3",{attrs:{id:"yin-ru"}},[t._v("引入")]),t._v(" "),r("pre",{pre:!0},[r("code",{attrs:{"v-pre":""}},[t._v('//setting/index.js\n\nimport axios from "./axios.conf"\nVue.prototype.$remote = axios\n')])]),t._v(" "),r("hr"),t._v(" "),r("h3",{attrs:{id:"pei-zhi"}},[t._v("配置")]),t._v(" "),r("p",[t._v("写在"),r("code",{pre:!0},[t._v("setting/axios.conf.js")]),t._v("中：")]),t._v(" "),r("pre",{pre:!0},[r("code",{attrs:{"v-pre":""}},[t._v("//setting/axios.conf.js\n\nimport axios from 'axios'\nimport qs from 'qs'\n\n...\n\nexport default axios\n")])]),t._v(" "),r("p",[t._v("配置默认请求参数：")]),t._v(" "),r("pre",{pre:!0},[r("code",{attrs:{"v-pre":""}},[t._v("axios.defaults.timeout = 5000;\n//axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded;charset=UTF-8';\n")])]),t._v(" "),r("p",[t._v("配置请求前的处理方法：")]),t._v(" "),r("p",[t._v("定义一个参数"),r("code",{pre:!0},[t._v("baseUrl")]),t._v("，参数设置为"),r("code",{pre:!0},[t._v("/local/")]),t._v("时使用本地数据模拟，把部分post方法转换成get方法，本地数据放在"),r("code",{pre:!0},[t._v("/static/data")]),t._v("文件夹。")]),t._v(" "),r("pre",{pre:!0},[r("code",{attrs:{"v-pre":""}},[t._v('const baseUrl = \'/local/\';\n\naxios.interceptors.request.use((config) => {\n\t//设置url\n\tif(baseUrl != \'/local/\'){\n\t\tconfig.url = baseUrl + config.url;\n\t}else{\n\t\tconfig.url = config.url.replace(".do", "");\n\t\tconfig.url = "/static/data/" + config.url + ".json";\n\t\tconfig.method = "get"\n\t}\n\t//post传参序列化\n\tif(config.method === \'post\') {\n//\t\tconfig.data = qs.stringify(config.data);\n\t}\n\treturn config;\n}, (error) => {\n\treturn Promise.reject(error);\n});\n')])]),t._v(" "),r("p",[t._v("配置请求后的处理方法：")]),t._v(" "),r("pre",{pre:!0},[r("code",{attrs:{"v-pre":""}},[t._v('//返回状态判断\naxios.interceptors.response.use((res) => {\n\tif(!res.status == "200") {\n\t\treturn Promise.reject(res.data);\n\t}\n\treturn res.data;\n}, (error) => {\n\t//404等问题可以在这里处理\n\treturn Promise.reject(error);\n});\n')])]),t._v(" "),r("blockquote",[r("p",[t._v("参考文档"),r("a",{attrs:{href:"https://www.kancloud.cn/yunye/axios/234845"}},[t._v("https://www.kancloud.cn/yunye/axios/234845")])])])])}]},o=r("C7Lr")(null,n,!1,null,null,null);e.default=o.exports}});
//# sourceMappingURL=5.f368d80335eba3b82e12.js.map