{"version":3,"sources":["webpack:///./src/pages/Notes/Node/FileUpload.md?8d4c","webpack:///./src/pages/Notes/Node/FileUpload.md?50f3","webpack:///./src/pages/Notes/Node/FileUpload.md"],"names":["FileUpload","render","this","$createElement","_self","_c","_m","staticRenderFns","_vm","_h","_v","pre","attrs","v-pre","href","Component","__webpack_require__","normalizeComponent","__webpack_exports__","module","exports"],"mappings":"sGAAA,IAGeA,GADEC,OAFjB,WAA0BC,KAAaC,eAAbD,KAAuCE,MAAAC,GAAwB,OAA/DH,KAA+DI,GAAA,IAExEC,iBADjB,WAAoC,IAAAC,EAAAN,KAAaO,EAAAD,EAAAL,eAA0BE,EAAAG,EAAAJ,MAAAC,IAAAI,EAAwB,OAAAJ,EAAA,WAAAA,EAAA,MAAAG,EAAAE,GAAA,UAAAF,EAAAE,GAAA,KAAAL,EAAA,MAAAG,EAAAE,GAAA,gBAAAF,EAAAE,GAAA,KAAAL,EAAA,KAAAG,EAAAE,GAAA,mBAAAF,EAAAE,GAAA,KAAAL,EAAA,OAA+JM,KAAA,IAASN,EAAA,QAAaO,OAAOC,QAAA,MAAYL,EAAAE,GAAA,qHAA2HF,EAAAE,GAAA,KAAAL,EAAA,KAAAG,EAAAE,GAAA,SAAAF,EAAAE,GAAA,KAAAL,EAAA,OAAmEM,KAAA,IAASN,EAAA,QAAaO,OAAOC,QAAA,MAAYL,EAAAE,GAAA,gGAA+FF,EAAAE,GAAA,KAAAL,EAAA,MAAAG,EAAAE,GAAA,KAAAL,EAAA,MAAAG,EAAAE,GAAA,cAAAF,EAAAE,GAAA,KAAAL,EAAA,KAAAG,EAAAE,GAAA,6BAAAF,EAAAE,GAAA,KAAAL,EAAA,OAAuJM,KAAA,IAASN,EAAA,QAAaO,OAAOC,QAAA,MAAYL,EAAAE,GAAA,uCAAAF,EAAAE,GAAA,KAAAL,EAAA,cAAAA,EAAA,KAAAG,EAAAE,GAAA,mBAAAL,EAAA,KAAuHO,OAAOE,KAAA,8CAAmDN,EAAAE,GAAA,kDAAAF,EAAAE,GAAA,KAAAL,EAAA,KAAAG,EAAAE,GAAA,KAAAL,EAAA,QAAsGM,KAAA,IAASH,EAAAE,GAAA,6BAAAF,EAAAE,GAAA,aAAAF,EAAAE,GAAA,KAAAL,EAAA,OAAgFM,KAAA,IAASN,EAAA,QAAaO,OAAOC,QAAA,MAAYL,EAAAE,GAAA,6JAA6JF,EAAAE,GAAA,KAAAL,EAAA,KAAAG,EAAAE,GAAA,cAAAF,EAAAE,GAAA,KAAAL,EAAA,OAAwEM,KAAA,IAASN,EAAA,QAAaO,OAAOC,QAAA,MAAYL,EAAAE,GAAA,+EAA+EF,EAAAE,GAAA,KAAAL,EAAA,KAAAG,EAAAE,GAAA,aAAAF,EAAAE,GAAA,KAAAL,EAAA,MAAAA,EAAA,MAAAA,EAAA,QAA0FM,KAAA,IAASH,EAAAE,GAAA,SAAAF,EAAAE,GAAA,aAAAF,EAAAE,GAAA,KAAAL,EAAA,MAAAA,EAAA,QAAsEM,KAAA,IAASH,EAAAE,GAAA,YAAAF,EAAAE,GAAA,8BAAAF,EAAAE,GAAA,KAAAL,EAAA,MAAAA,EAAA,QAA0FM,KAAA,IAASH,EAAAE,GAAA,WAAAF,EAAAE,GAAA,kBAAAF,EAAAE,GAAA,KAAAL,EAAA,KAAAG,EAAAE,GAAA,yCAAAL,EAAA,QAA4HM,KAAA,IAASH,EAAAE,GAAA,iBAAAF,EAAAE,GAAA,cAAAL,EAAA,QAA0DM,KAAA,IAASH,EAAAE,GAAA,gCAAAF,EAAAE,GAAA,gBAAAF,EAAAE,GAAA,KAAAL,EAAA,KAAAG,EAAAE,GAAA,SAAAF,EAAAE,GAAA,KAAAL,EAAA,OAA0HM,KAAA,IAASN,EAAA,QAAaO,OAAOC,QAAA,MAAYL,EAAAE,GAAA,66CCYvqEK,EAbyBC,EAAQ,OAajCC,CAXA,KAaEjB,GATF,EAEA,KAEA,KAEA,MAUekB,EAAA,QAAAH,EAAiB,8BCtBhCI,EAAAC,QAAiBJ,EAAQ","file":"static/js/14.83ad994ba3652a9b241e.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _vm._m(0)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('h2',[_vm._v(\"文件上传\")]),_vm._v(\" \"),_c('h5',[_vm._v(\"js提交带文件的表单\")]),_vm._v(\" \"),_c('p',[_vm._v(\"创建FormData对象：\")]),_vm._v(\" \"),_c('pre',{pre:true},[_c('code',{attrs:{\"v-pre\":\"\"}},[_vm._v(\"let formData = new FormData();\\n\\nformData.append(\\\"file\\\", this.file);\\nformData.append(\\\"info\\\", \\\"测试上传文件功能\\\");\\n\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"提交：\")]),_vm._v(\" \"),_c('pre',{pre:true},[_c('code',{attrs:{\"v-pre\":\"\"}},[_vm._v(\"this.$remote.post('upload', formData, config).then((res) => {\\n\\tconsole.log(res);\\n})\\n\")])]),_vm._v(\" \"),_c('hr'),_vm._v(\" \"),_c('h5',[_vm._v(\"node接收文件\")]),_vm._v(\" \"),_c('p',[_vm._v(\"使用formidable模块实现（基本用法）：\")]),_vm._v(\" \"),_c('pre',{pre:true},[_c('code',{attrs:{\"v-pre\":\"\"}},[_vm._v(\"npm install formidable --save\\n\")])]),_vm._v(\" \"),_c('blockquote',[_c('p',[_vm._v(\"formidable参考文档 \"),_c('a',{attrs:{\"href\":\"https://www.npmjs.com/package/formidable\"}},[_vm._v(\"https://www.npmjs.com/package/formidable\")])])]),_vm._v(\" \"),_c('p',[_vm._v(\"用\"),_c('code',{pre:true},[_vm._v(\"Formidable.IncomingForm\")]),_vm._v(\"创建传入表单：\")]),_vm._v(\" \"),_c('pre',{pre:true},[_c('code',{attrs:{\"v-pre\":\"\"}},[_vm._v(\"router.post('/upload', (req, res) => {\\n\\tvar form = new formidable.IncomingForm();\\n    // 设置文件保存路径，相对路径\\n    form.uploadDir = \\\"./uploads\\\";\\n});\\n\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"处理提交的表单：\")]),_vm._v(\" \"),_c('pre',{pre:true},[_c('code',{attrs:{\"v-pre\":\"\"}},[_vm._v(\"form.parse(req, function(err, fields, files) {\\n\\t//do something\\n});\\n\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"回调函数参数：\")]),_vm._v(\" \"),_c('ul',[_c('li',[_c('code',{pre:true},[_vm._v(\"err\")]),_vm._v(\" ：报错信息；\")]),_vm._v(\" \"),_c('li',[_c('code',{pre:true},[_vm._v(\"fields\")]),_vm._v(\" ：提交表单中除文件外的其它信息，json格式；\")]),_vm._v(\" \"),_c('li',[_c('code',{pre:true},[_vm._v(\"files\")]),_vm._v(\" ：提交表单中的文件\")])]),_vm._v(\" \"),_c('p',[_vm._v(\"保存后的文件名为“[交易名]_[随机字符串]”，无文件后缀，可以在保存后用\"),_c('code',{pre:true},[_vm._v(\"fs.rename()\")]),_vm._v(\"方法修改，或者设置 \"),_c('code',{pre:true},[_vm._v(\"form.keepExtensions = true\")]),_vm._v(\"文件将保持原扩展名。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"代码：\")]),_vm._v(\" \"),_c('pre',{pre:true},[_c('code',{attrs:{\"v-pre\":\"\"}},[_vm._v(\"const express = require('express');\\n\\nconst router = express.Router();\\n\\nconst app = express();\\n\\nconst formidable = require('formidable');\\n\\nconst fs = require('fs');\\n\\nrouter.get('/', (req, res) => {\\n\\t//测试连通性\\n\\tres.send(\\\"node server\\\");\\n})\\n\\nrouter.post('/upload', (req, res) => {\\n\\tvar form = new formidable.IncomingForm();\\n    // 设置文件保存路径，相对路径\\n    form.uploadDir = \\\"./uploads\\\";\\n    \\n\\tform.parse(req, function(err, fields, files) {\\n\\t\\tif(err){\\n\\t\\t\\tres.send({\\n\\t\\t\\t\\t\\\"status\\\" : \\\"200\\\",\\n\\t        \\t\\\"message\\\" : \\\"上传失败\\\"\\n\\t\\t\\t});\\n\\t\\t\\treturn;\\n\\t\\t}\\n        var fileName = files.file.name;\\t\\t//上传文件名\\n        var fileNameArr = fileName.split('.');\\n        if(fileNameArr.length != 1){\\n        \\t//files.file.path：文件保存后的路径，无后缀名\\n        \\t//补上文件后缀\\n        \\tvar newfile = files.file.path + '.' + fileNameArr[fileNameArr.length - 1];\\n        \\tfs.rename(files.file.path, newfile, function(err){\\n\\t        \\tif(err){\\n\\t        \\t\\tres.send({\\n\\t        \\t\\t\\t\\\"status\\\" : \\\"200\\\",\\n\\t        \\t\\t\\t\\\"message\\\" : \\\"上传失败\\\"\\n\\t        \\t\\t});\\n\\t        \\t}else{\\n\\t        \\t\\tres.send({\\n\\t\\t\\t\\t\\t\\t\\\"status\\\" : \\\"200\\\",\\n\\t\\t\\t\\t\\t\\t\\\"message\\\" : \\\"上传成功\\\"\\n\\t\\t\\t\\t\\t});\\n\\t        \\t}\\n\\t        })\\n        }else{\\n        \\tres.send({\\n\\t\\t\\t\\t\\\"status\\\" : \\\"200\\\",\\n\\t\\t\\t\\t\\\"message\\\" : \\\"上传成功\\\"\\n\\t\\t\\t});\\n        }\\n    });\\n});\\napp.use(router);\\n\\napp.listen(8099);\\n\\nconsole.log(\\\"http start at port 8099\\\");\\n\")])])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-2f9ff84d\",\"hasScoped\":false,\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./node_modules/_vue-markdown-loader@2.4.1@vue-markdown-loader/lib/markdown-compiler.js?raw!./src/pages/Notes/Node/FileUpload.md\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nvar __vue_script__ = null\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2f9ff84d\\\",\\\"hasScoped\\\":false,\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!../../../../node_modules/_vue-markdown-loader@2.4.1@vue-markdown-loader/lib/markdown-compiler.js?raw!./FileUpload.md\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader!./node_modules/_vue-markdown-loader@2.4.1@vue-markdown-loader/lib/markdown-compiler.js?raw!./src/pages/Notes/Node/FileUpload.md\n// module id = null\n// module chunks = ","module.exports = require(\"!!vue-loader!../../../../node_modules/_vue-markdown-loader@2.4.1@vue-markdown-loader/lib/markdown-compiler.js?raw!./FileUpload.md\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/Notes/Node/FileUpload.md\n// module id = g4tY\n// module chunks = 14"],"sourceRoot":""}