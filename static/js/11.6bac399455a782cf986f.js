webpackJsonp([11],{HIX4:function(e,t,r){e.exports=r("N0pe")},N0pe:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("section",[r("h2",[e._v("Axios")]),e._v(" "),r("h4",[e._v("安装")]),e._v(" "),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":""}},[e._v("cnpm i axios -S\n")])]),e._v(" "),r("hr"),e._v(" "),r("h4",[e._v("引入")]),e._v(" "),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":""}},[e._v('//setting/index.js\n\nimport axios from "./axios.conf"\nVue.prototype.$remote = axios\n')])]),e._v(" "),r("hr"),e._v(" "),r("h4",[e._v("配置")]),e._v(" "),r("p",[e._v("写在"),r("code",{pre:!0},[e._v("setting/axios.conf.js")]),e._v("中：")]),e._v(" "),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":""}},[e._v("//setting/axios.conf.js\n\nimport axios from 'axios'\nimport qs from 'qs'\n\n...\n\nexport default axios\n")])]),e._v(" "),r("p",[e._v("配置默认请求参数：")]),e._v(" "),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":""}},[e._v("axios.defaults.timeout = 5000;\n//axios.defaults.headers.post['Content-Type'] = 'application/x-www-form-urlencoded;charset=UTF-8';\n")])]),e._v(" "),r("p",[e._v("配置请求前的处理方法：")]),e._v(" "),r("p",[e._v("定义一个参数"),r("code",{pre:!0},[e._v("baseUrl")]),e._v("，参数设置为"),r("code",{pre:!0},[e._v("/local/")]),e._v("时使用本地数据模拟，把部分post方法转换成get方法，本地数据放在"),r("code",{pre:!0},[e._v("/static/data")]),e._v("文件夹。")]),e._v(" "),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":""}},[e._v('const baseUrl = \'/local/\';\n\naxios.interceptors.request.use((config) => {\n\t//设置url\n\tif(baseUrl != \'/local/\'){\n\t\tconfig.url = baseUrl + config.url;\n\t}else{\n\t\tconfig.url = config.url.replace(".do", "");\n\t\tconfig.url = "/static/data/" + config.url + ".json";\n\t\tconfig.method = "get"\n\t}\n\t//post传参序列化\n\tif(config.method === \'post\') {\n//\t\tconfig.data = qs.stringify(config.data);\n\t}\n\treturn config;\n}, (error) => {\n\treturn Promise.reject(error);\n});\n')])]),e._v(" "),r("p",[e._v("配置请求后的处理方法：")]),e._v(" "),r("pre",{pre:!0},[r("code",{pre:!0,attrs:{"v-pre":""}},[e._v('//返回状态判断\naxios.interceptors.response.use((res) => {\n\tif(!res.status == "200") {\n\t\treturn Promise.reject(res.data);\n\t}\n\treturn res.data;\n}, (error) => {\n\t//404等问题可以在这里处理\n\treturn Promise.reject(error);\n});\n')])]),e._v(" "),r("blockquote",[r("p",[e._v("参考文档"),r("a",{attrs:{href:"https://www.kancloud.cn/yunye/axios/234845"}},[e._v("https://www.kancloud.cn/yunye/axios/234845")])])])])}]},o=r("C7Lr")(null,n,!1,null,null,null);t.default=o.exports}});
//# sourceMappingURL=11.6bac399455a782cf986f.js.map